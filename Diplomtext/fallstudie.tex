Zur Überprüfung der praktischen Einsetzbarkeit der entwickelten Lösung wurde eine Fallstudie durchgeführt. Die Web Service-basierte Anwendung und die zugehörigen Tests, die dabei verwendet wurden, sind aus einem studentischen Projekt entstanden. An der Universität Hannover am Fachgebiet Software Engineering wurde im Wintersemester 2006/07 das Projekt "`Entwicklung einer Weservice-basierten Anwendung"' durchgeführt. 
Innerhalb eines Semesters haben 8 Studenten die Anwendung entworfen, implementiert und getestet. Aufgrund der eingesetzten Technologien und Werkzeuge, wie BPEL (Kompositionsprache), BPELUnit-Framework (Testwerkzeug) und \textit{ActiveBPEL Engine}, hat sich das Projekt als Fallstudie für diese Arbeit angeboten. Zu erwähnen ist noch, dass in dem Projekt die BPEL-Sprache noch in der Versiom 1.1 verwendet wurde.

Entwickelt wurde ein System für Fachgebiet Software Engineering , das den Anmeldeprozess für studentische Abschlussarbeiten unterstützt. Das System stellt dabei sicher, dass alle wesentliche Bestandteile der Betreuung, wie z.B. Veröffentlichung und Anmeldung der Abschlussarbeit, Planung von Zwischen- und Endvorträgen, Bewertung usw., eingehalten werden.
Für die Fallstudie sind vor allem die entstandenen BPEL-Prozesse und die Tests interessant. 

Zur besseren Einschätzung der Größe der entstandenen Anwendung und Einordnung dieser Fallstudie werden einige statistischen Daten der BPEL-Prozesses und (BPELUnit-) Tests vorgestellt.  

Der Gesamtprozess besteht aus 12 Teilprozessen. Insgesamt wurden 13 BPEL-Dateien erstellt: 12 für Teilprozesse und eine für den Hauptprozess, der alle Teilprozesse (als Web Services) zu einer Anwendung verknüpft. Die Abbildung \ref{fig:beispielprozess} stellt den Zusammenhang grafisch dar.
Die folgenden Statistiken beziehen sich auf alle 13 BPEL-Dateien und zeigen welche Aktivitäten bei der Prozessmodellierung verwendet wurden.

\begin{figure}[htbp]
	\centering
		\includegraphics[width=\textwidth]{bilder/Fallstudie.png}
		\caption{BPEL-Prozess. }
	\label{fig:beispielprozess}
\end{figure}

Es wurden insgesamt 508 strukturierten Aktivitäten und Scopes verwendet:
\begin{table}[h!]
\begin{tabular}{p{2cm}p{0.5cm}p{2cm}}
\textbf{Aktivität}&\ &\textbf{Anzahl}\\[0.1cm]
\hline \\
flow&\ &237\\
pick&\ &1\\
switch&\ &71\\
while&\ &19\\
secuence&\ &0\\
scope&\ &180\\
\end{tabular}
\end{table}

\newpage
750 Basisaktivitäten:
\begin{table}[h!]
\begin{tabular}{p{3cm}p{3cm}p{3cm}p{1cm}}
\textbf{Aktivität}&\textbf{Anzahl}&\textbf{Aktivität}&\textbf{Anzahl}\\[0.1cm]
\hline \\
assign&387&compensate&0\\
empty&109&invoke&56\\
receive&21&reply&55\\
terminate&14&throw&98\\
wait&10&&\\
\end{tabular}
\end{table}

Auffällig ist, dass keine \textit{sequence}-Aktivitäten verwendet wurden; die sämtlichen squentiellen Abläufe wurden mit Hilfe von Synchronistaionslinks in \textit{flow}-Aktivitäten modelliert.

Zum Testen des Prozesses wurde BPELUnit-Framework eingesetzt.
Es wurden zwei Testsuites erstellt:
\begin{itemize}
	\item \textbf{Suite1} testet den gesamten Prozesses. In diesem Fall werden außschließlich die Kommuniaktionspüartner (Web Services) der Teilprozesse durch Mock's ersetzt. Die zugehörige Aufrufe sind in der Abbildung \ref{fig:beispielprozess} durch kurze Pfeile angedeutet. Das heißt, es wird ein Prozess getestet, der nicht in einer einzelnen BPEL-Datei beschrieben ist, sondern sich aus mehreren Teilprozessen zusammensetzt, die jeweils in einer-BPEL-Datei definiert sind. Es werden also nicht die kleinsten Einheiten des Prozesses isoliert, was eine Auswirkung auf die Ermittlung der Testabdeckung haben wird (siehe weiter).
	\item \textbf{Suite2} testet die einzelnen Teilprozesse. In dieser \textit{suite} werden die einzelnen Prozesse isoliert und getestet, so wie es bei Unittest auch gefordert wird. Zusätzlich zu den Partnern, die bei \textit{suite1} durch Mock's ersetzt wurden, wird auch der Hauptprozess, der in diesem Fall Client ist, durch ein Client-Mock ersetzt. 
\end{itemize}

Die Teilprozesse werden sowohl in \textit{suite1} als auch in \textit{suite2} getestet. Um die gesamte Testabdeckung zu ermitteln, die durch beide Suites zusammen erreicht wird, müssen zum einen beide Testsuites ausgeführt und zum anderen dieselbe Marken verwendet werden, um die abgedeckten Prozesselemente in beiden Testläufen identifizieren zu können. Das BPELUnit-Framework ist allerdings so konzipiert, dass nur eine suite pro Testlauf ausgeführt werden kann und die einzelnen Testläufe voneinander unabhängig sind. 
Die Messung der Testabdeckung erfolgt ebenfalls suite-bezogen. Das heißt, nur die Testabdeckungen, die bei Ausführung der einzelnen Suites erreicht werden,  ermittelt werden können. Die Berechnung der Testabdeckung über mehrere Suites ist nicht möglich.

Für die Ermittlung der Testabdeckung mit dem BPELUnit-Framework müssen also alle Testfälle, die ein Prozess betreffen, in einer Testsuite organisiert sein.s
  
Obwohl die Organisaton der Suites in dem Projekt den Anforderungen nicht entspricht und die vollständige Abdeckung nicht berechnet werden kann, kann die praktische Einsetzbarkeit des Verfahrens und der Implementierung trotzdem überprüft werden.

\textbf{Instrumentierung}. Bei der Instrumentierung werden die BPEL-Dateien (alle 13) für alle in dem Abschnitt \ref{sec:metrikdefinition} definierten Metriken instrumentiert. Einige statistischen Daten der Instrumentierungsphase folgen:
\begin{itemize}
	\item 2857 Marken,
	\item 1502 invoke- und assign-Aktivitäten,
	\item 1095 sequence-Aktivitäten,
	\item 4 flow-Aktivitäten.
\end{itemize}

Es werden insgesamt 2857 Marken im Prozess platziert. Die Übertragung der Marken wird durch 1502 \textit{invoke-}Aktivitäten realisiert. Durch das Zusammenfassen der Marken, die hintereinander im Kontrollfluss liegen, können 1355 \textit{invoke}-Aktivitäten gespart werden und damit die \textit{overhead}-Zeit, die durch Ausführung der Aktivitäten für die Übertragung der Marken zustande kommt, verringert werden.  Der getestete BPEL-Prozess enthält vier Links, die für die Linkabdeckung relevant sind.  Zur Erfassung des Linkstatus wurde für jeden Link, wie im Abschnitt \ref{sec:Linkabdeckung} beschrieben, eine \textit{flow}-Aktivität eingefügt. 

\textbf{Ergebnisse}.
Die Ergebnisse sind in der folgenden Tabelle dargestellt.

\textbf{Testsuite1:}
\begin{table}[h!]
\begin{tabular}{p{7cm}p{2cm}p{2cm}p{2cm}}
\textbf{Aktivität}&\textbf{Anzahl}&\textbf{Aktivität}&\textbf{Anzahl}\\[0.1cm]
\hline \\
Activitätsabdeckung&750&468&62\%\\
\ \ \ assign&387&277&71\%\\
\ \ \ compensate&0&0&-\\
\ \ \ empty&109&91&83\%\\
\ \ \ invoke&56&56&100\%\\
\ \ \ receive&21&21&100\%\\
\ \ \ reply&55&23&41\%\\
\ \ \ terminate&14&0&0\%\\
\ \ \ throw&98&0&0\%\\
\ \ \ wait&10&0&0\%\\
Zweigabdeckung&1020&704&69\%\\
Linkabdeckung&8&6&75\%\\
\ \ \ negativ&4&3&75\%\\
\ \ \ positiv&4&3&75\%\\
Fault Handler-Abdeckung&64&0&0\%\\
Compensation Handler-Abdeckung&0&0&-\%\\
\end{tabular}
\end{table}
\FloatBarrier
\textbf{Testsuite2:}
\begin{table}[h!]
\begin{tabular}{p{7cm}p{2cm}p{2cm}p{2cm}}
\textbf{Aktivität}&\textbf{Anzahl}&\textbf{Aktivität}&\textbf{Anzahl}\\[0.1cm]
\hline \\
Activitätsabdeckung&750&378&50\%\\
\ \ \ assign&387&225&58\%\\
\ \ \ compensate&0&0&-\\
\ \ \ empty&109&85&77\%\\
\ \ \ invoke&56&44&78\%\\
\ \ \ receive&21&12&57\%\\
\ \ \ reply&55&12&21\%\\
\ \ \ terminate&14&0&0\%\\
\ \ \ throw&98&0&0\%\\
\ \ \ wait&10&0&0\%\\
Zweigabdeckung&1020&570&55\%\\
Linkabdeckung&8&2&25\%\\
\ \ \ negativ&4&1&25\%\\
\ \ \ positiv&4&1&25\%\\
Fault Handler-Abdeckung&64&0&0\%\\
Compensation Handler-Abdeckung&0&0&-\%\\
\end{tabular}
\end{table}


\FloatBarrier
Wie bereits erläutert, überschneiden sich die beiden Testsuites in den getesteten Prozessen. Aufgrund der fehlenden Werten für die gesamte Testabdeckung können die Tests nicht bewertet werden.
 
\textbf{Zeitmessungen}.
Die Laufzeit wird aufgrund der zusätzlichen Instrumentierungsphase und neuen Aktivitäten im Prozess größer.
Die Studie wurde auf folgendem System durchgeführt:


Die Tabelle listet gemessene Zeiten für beide Testsuites:
 
